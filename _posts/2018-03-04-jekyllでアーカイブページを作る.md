---
layout: post
thumbnail: /images/uploads/screen_jekyll.png
title: Jekyllでアーカイブページを作る
description: jekyll/jekyll-archives を利用してアーカイブページを作成します
location: Tokyo
categories:
  - Blog
tags:
  - jekyll
  - jekyll-archives
---
こんにちは、なかむです。
ブログの記事も徐々に増えてきたので、[jekyll/jekyll-archives](https://github.com/jekyll/jekyll-archives)を利用してアーカイブページを作成します。

## gemをインストール

Gemfileにjekyll-archivesを追加します。

```Gemfile
#Gemfile
group :jekyll_plugins do
  gem "jekyll-feed", "~> 0.6"
  gem 'jekyll-sitemap'
  gem 'jekyll-pwa-plugin'
  gem 'jekyll-minifier'
  gem 'jekyll-archives' <--- これを追加
end
```

続いて`bundle install`コマンドを実行し、gemをインストールします
```
$ bundle install 
or
$ bundle install --path vendor/bundler
```

※ プロジェクト配下にインストールするかどうかでコマンドを変えてください。

## _config.ymlに設定を追加

`_config.yml`ファイルのpluginsにjekyll-archivesの設定を追加します。
```_config.yml
# _config.yml
plugins:
  - jekyll-feed
  - jekyll-sitemap
  - jekyll-minifier
  - jekyll-archives <--- これを追加
```

すでにcategoryやtagのページは独自に作成済みなので、今回は月ごとのアーカイブを作成します。

`_config.yml`に以下の設定を追加します。
```_config.yml
# _config.yml
jekyll-archives:
  enabled: [month]
  layouts:
    month: month_archive
  permalinks:
    month: '/archives/month/:year:month/'
``

`enabled`を`all`にすることで、year, month, day, tag, categoryの全てのアーカイブページが作成されます。今回はmonthのみアーカイブページを作成します。  
全てのアーカイブページを作成する場合、以下のような設定になります。

```_config.yml
# _config.yml
jekyll-archives:
  enabled: [all]
  layouts:
    year: year-archive
    month: month-archive
    day: day-archive
    tag: tag-archive-layout
  permalinks:
    year: '/archives/year/:year/'
    month: '/archives/month/:year:month/'
    day: '/archives/month/:year:month:day/'
    tag: '/archives/tag/:name/'
    category: '/archives/category/:name/'
```

## アーカイブページのレイアウトを作成
`_layouts`に`month_archive.html`を作成します。  
今回は以下のようなhtmlを作成しています。

```_layouts/month_archive.html

```
